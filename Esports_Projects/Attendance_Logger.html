<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>A webapp which tracks ESports Attendance.</title>
        <meta name="description" content="As work for LCHS Esports, I made a webapp which displays player attendance and wins/losses.">
    
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="topnav.css">
        <link rel="icon" type="image/x-icon" href="LCHS_Favicon.ico">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9331531720474135" crossorigin="anonymous"></script>
    </head>
    
    <body>
        <div class="topnav">
            <a href="Attendance_Home.html">Home</a>
            <a href="Attendance_Players.html">View Registered Players</a>
            <a href="Attendance_Winrate.html">View Winrate</a>
            <a href="Attendance_Attendance.html">View Attendance</a>
            <a href="Attendance_Make_Player.html">Create Player</a>
            <a class="active" onclick="IncreaseLogMatchCounter()">Log a Match!</a>
        </div>
        <br>
        <main id="main" style="display: none;">
            <br>
            <div id="LoginPane" class="centerTop">
                <input type="password" name="Passcode" id="Passcode" placeholder="Enter the Admin passcode!" style="width:fit-content"><button onclick="CheckPasscode()">Submit</button>
            </div>
            <script src="../Helpers.js"></script>
            <script>
                let token;
                async function CheckPasscode() {
                    // Post passcode to the server.
                    let res = await postJSON("./Post_Modules/CheckPasscode.js", { passcode: document.getElementById("Passcode").value });
                    if (res.sucessful) {
                        token = res.token;
                        document.getElementById("MainContent").style.display = "block";
                        document.getElementById("LoginPane").style.display = "none";
                    } else {
                        alert("Incorrect password! Please try again.");
                    }
                }

                // Enter the password when the enter key is pressed.
                window.onkeypress = function(event) {
                    if (event.key == "Enter" && document.getElementById("Passcode") == document.activeElement) {
                        CheckPasscode()
                    }
                }
            </script>
            <div id="MainContent" style="display: none;">
                <div id="LoadGame">
                    <select name="GameSeletor" id="GameSeletor"></select>
                    <br>
                    <button onclick="loadSelectedGame()">Load Selected Game!</button>
                </div>
                <div id="SSBUMenu" style="display:none">
                    <select name="PlayerTopSelect" id="PTopSelect">
                    </select><br>
                    <select name="CompSelector" id="CompSelector">
                        <option value="beat">won against</option>
                        <option value="lost">lost to</option>
                    </select><br>
                    <select name="PlayerBotSelect" id="PBotSelect">
                    </select><br>
                    <button onclick="SubmitSSBUMatch()">Submit Match!</button>
                </div>
                <div id="ProcessingMenu" style="display: none;">
                    <h2 id="ProcessingText" style="margin-left: 50%; margin-right: 50%;">Processing...</h2>
                    <button id="LeaveProcessingScreenButton" onclick="LeaveProcessingScreen()" style="display: none; margin-left: 50%; margin-right: 50%;">Back!</button>
                </div>
            </div>
            <br>
        </main>

        <script src="./logger.js" onload="loadGames()"></script>
    </body>
</html>